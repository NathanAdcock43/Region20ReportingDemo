(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(e){if(e.ep)return;e.ep=!0;const r=i(e);fetch(e.href,r)}})();const a="https://interviewdemo.nathanadcock.dev/region20";function d(n,t){n.textContent=typeof t=="string"?t:JSON.stringify(t,null,2)}function o(n){return document.querySelector(n)}function l(n){const t=Number(n);return Number.isFinite(t)?t.toFixed(2):""}async function m(n){n.preventDefault();const t=Number(o("#studentId").value),i=Number(o("#assessmentId").value),s=Number(o("#earned").value),e=Number(o("#possible").value),r=`${a}/score?studentId=${t}&assessmentId=${i}&earned=${s}&possible=${e}`;try{const c=await fetch(r,{method:"POST"});if(!c.ok)throw new Error(await c.text());const f=await c.json(),u=l(f.course_grade_pct);d(o("#scoreResult"),u?`Course Grade %: ${u}`:"No percentage returned")}catch(c){d(o("#scoreResult"),`Error: ${String(c)}`)}}function p(n){const t=o("#progressBody");if(t.innerHTML="",!Array.isArray(n)||n.length===0){t.innerHTML='<tr><td colspan="2" class="muted">No rows</td></tr>';return}for(const i of n){const s=document.createElement("tr");s.innerHTML=`
      <td>${i.course_name??""}</td>
      <td>${l(i.grade_pct)}</td>
    `,t.appendChild(s)}}async function g(n){n.preventDefault();const t=Number(o("#pStudentId").value),i=o("#term").value.trim(),s=`${a}/progress/${t}?term=${encodeURIComponent(i)}`;try{const e=await fetch(s);if(!e.ok)throw new Error(await e.text());const r=await e.json();p(r),d(o("#progressRaw"),r)}catch(e){d(o("#progressRaw"),{ok:!1,error:String(e)})}}document.addEventListener("DOMContentLoaded",()=>{o("#scoreForm").addEventListener("submit",m),o("#progressForm").addEventListener("submit",g)});
